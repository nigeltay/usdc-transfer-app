"use client";
import Image from "next/image";
import Modal from "react-modal";
import { ethers } from "ethers";
import React, { useEffect, useState } from "react";
import Link from "next/link";
import Head from "next/head";
import styles from "../../styles/Home.module.css";

export default function Home() {
  const [currentWalletAddress, setCurrentWalletAddress] = useState<string>("");
  async function connectWallet() {
    //connect metamask account on page enter
    const { ethereum } = window;

    // Check if MetaMask is installed
    if (!ethereum) {
      return "Make sure you have MetaMask Connected!";
    }

    // Get user Metamask Ethereum wallet address
    const accounts = await ethereum.request({
      method: "eth_requestAccounts",
    });
    // Get the first account address
    const walletAddr = accounts[0];
    //set to variable to store current wallet address
    setCurrentWalletAddress(walletAddr);
  }

  const goToCreateBusinessPage = () => {
    // Navigate to the desired page on button click
    // You can replace "/otherpage" with the path of the page you want to navigate to
    window.location.href = "/createBusiness";
  };
  useEffect(() => {
    connectWallet();
  }, []);

  return (
    <>
      <Head>
        <title>USDC Transfer App</title>

        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/images.png" />
      </Head>

      <div className={styles.background}>
        <div className={styles.topPanel}>
          <div className={styles.walletAddress}>{`USDC Transfer App`}</div>
          <div className={styles.walletAddress}>
            {`Wallet Address: ${currentWalletAddress}`}
          </div>
        </div>

        <div style={{ display: "flex" }}>
          {/* create business account */}

          <div className={styles.homePageContainers}>
            <div className={styles.imageContainer}>
              <Image
                src="/images/business.png"
                alt="Business Image"
                width={100}
                height={100}
              />
            </div>

            <h2 className={styles.createBusinessAccountText}>
              <div>{`Create Business Account`}</div>
            </h2>
            <div
              style={{
                color: "black",
                paddingLeft: "25px",
                paddingTop: "10px",
                //textAlign: "center",
              }}
            >
              {`Creates an account for members of the
            business to make contributions.`}
            </div>
            <div className={styles.buttonContainer}>
              <button
                className={styles.goToCreateBusinessPageBtn}
                onClick={goToCreateBusinessPage}
              >
                Create
              </button>
            </div>
          </div>
        </div>
        <div style={{ color: "black", padding: "10px" }}>Explore Accounts</div>
      </div>
    </>
  );
}
